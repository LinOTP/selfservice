<form [formGroup]="loginFormGroup"
      (ngSubmit)="login()"
      *ngIf="!displaySecondFactor; else secondFactor">
  <mat-card id="loginCard">
    <mat-card-title i18n="card header|login page title">Login</mat-card-title>
    <mat-card-content>
      <mat-form-field>
        <input matInput
               formControlName="username"
               placeholder="Username"
               i18n-placeholder>
      </mat-form-field>
      <mat-form-field *ngIf="systemInfo?.realm_box">
        <mat-label i18n>Realm</mat-label>
        <mat-select formControlName="realm">
          <mat-option *ngFor="let realm of systemInfo.realms | keyvalue"
                      [value]="realm.key">
            {{realm.value.realmname}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <input matInput
               type="password"
               formControlName="password"
               placeholder="Password"
               i18n-placeholder>
      </mat-form-field>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button
              type="submit"
              color="primary"
              i18n="login action|login page submit button">Login</button>
    </mat-card-actions>
  </mat-card>
</form>

<ng-template #secondFactor>
  <form [formGroup]="secondFactorFormGroup"
        (ngSubmit)="submitSecondFactor()">
    <mat-card id="loginCard">
      <mat-card-title i18n="card header|login page title">Login</mat-card-title>
      <mat-card-content>
        <mat-form-field>
          <input matInput
                 formControlName="otp"
                 placeholder="OTP"
                 i18n-placeholder>
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button
                type="reset"
                color="primary"
                (click)="resetAuthForm()"
                i18n="2nd factor login action|login page second factor cancel button">Cancel</button>
        <button mat-raised-button
                type="submit"
                color="primary"
                i18n="2nd factor login action|login page second factor submit button">Submit</button>
      </mat-card-actions>
    </mat-card>
  </form>
</ng-template>