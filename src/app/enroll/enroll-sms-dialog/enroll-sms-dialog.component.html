<h2 i18n>Add {{data.tokenTypeDetails.name}}</h2>

<mat-horizontal-stepper [linear]="true"
                        linear>

  <mat-step [stepControl]="enrollmentStep"
            id="stepDescription">
    <p i18n>Create a new token that is paired with your mobile phone to receive OTP values via SMS for authentication.
    </p>

    <p *ngIf="!canEditPhone && userPhone"
       i18n>The token will use your user mobile number: <b>{{userPhone}}</b></p>
    <p *ngIf="!canEditPhone && !userPhone"
       class="warning"
       i18n>
      You have no mobile number assigned to your user account and the token will therefore not work after creation. You
      may need to contact your administrator for help.
    </p>

    <p i18n>You may set the following token details before creation:</p>
    <form [formGroup]="enrollmentStep">
      <mat-form-field *ngIf="canEditPhone">
        <input matInput
               i18n-placeholder
               placeholder="Mobile phone number"
               formControlName="phoneNumber"
               autofocus>
        <mat-hint *ngIf="canEditPhone"
                  i18n>Set the mobile phone number to use for your token</mat-hint>
      </mat-form-field>
      <mat-form-field>
        <input matInput
               i18n-placeholder
               placeholder="Token description"
               formControlName="description"
               autofocus>
        <mat-hint i18n>Enter a description for your token.</mat-hint>
      </mat-form-field>
    </form>

    <mat-dialog-actions align="end">
      <div i18n>Step 1 of 2</div>
      <span class="spacer"></span>
      <button mat-raised-button
              (click)="cancelDialog()"
              i18n>Cancel</button>
      <button mat-raised-button
              color="primary"
              (click)="enrollToken()"
              id="goTo2"
              i18n>Next</button>
    </mat-dialog-actions>
  </mat-step>

  <mat-step active="false"
            id="stepPIN">
    <p i18n>A token with the serial number {{enrolledTokenSerial}} has been created.</p>

    <ng-container *ngxPermissionsOnly="Permission.SETPIN">
      <p i18n>If you wish to set a security PIN, please do so now:</p>
      <button mat-raised-button
              color="primary"
              (click)="setPin()"
              i18n>Set pin</button>
      <p class="mat-hint hint"
         i18n>Setting a PIN helps you protect your token against misuse.</p>
    </ng-container>
    <mat-dialog-actions align="end">
      <div i18n>Step 3 of 3</div>
      <span class="spacer"></span>
      <button mat-raised-button
              color="primary"
              (click)="closeDialog()"> {{ data.closeLabel }}</button>
    </mat-dialog-actions>
  </mat-step>

</mat-horizontal-stepper>
